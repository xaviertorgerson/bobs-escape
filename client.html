
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ProLink // Davis Master Bath</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&family=IBM+Plex+Mono:wght@500;600;700&display=swap" rel="stylesheet">
    <style>
        :root { 
            --pro-orange: #FF5722; 
            --pro-orange-hover: #E64A19;
            --pro-text: #0F172A; /* slate-900 */
            --pro-border: #CBD5E1; /* slate-300 */
            --pro-bg: #F8FAFC; /* slate-50 */
            
            --tactile-shadow: 4px 4px 0px rgba(30, 41, 59, 0.12);
            --tactile-shadow-sm: 2px 2px 0px rgba(30, 41, 59, 0.08);
        }
        
        body { 
            font-family: 'Inter', sans-serif; 
            background: var(--pro-bg); 
            color: var(--pro-text); 
            overflow-x: hidden; 
            -webkit-font-smoothing: antialiased;
        }
        
        .mono { font-family: 'IBM Plex Mono', monospace; }
        .brand-logo { font-family: 'Inter', sans-serif; font-weight: 900; letter-spacing: -0.04em; }
        
        .grid-bg { 
            background-image: radial-gradient(rgba(148, 163, 184, 0.3) 1.5px, transparent 1.5px); 
            background-size: 28px 28px; 
        }
        
        .pro-card { 
            background: white; 
            border: 1.5px solid var(--pro-border); 
            border-radius: 8px;
            box-shadow: var(--tactile-shadow); 
            position: relative; 
            transition: all 0.25s ease; 
        }
        
        .view-pane { display: none; animation: fadeIn 0.3s ease-out; }
        .view-pane.active { display: block; }
        
        .btn-main { 
            background: var(--pro-orange); 
            color: white; 
            font-weight: 700; 
            font-size: 0.95rem;
            letter-spacing: 0.02em;
            border-radius: 6px;
            box-shadow: 0 4px 12px rgba(255, 87, 34, 0.25);
            transition: all 0.2s ease; 
            cursor: pointer; 
            text-align: center; 
            width: 100%; 
            display: block; 
            border: 1px solid transparent;
        }
        .btn-main:hover { background: var(--pro-orange-hover); transform: translateY(-2px); box-shadow: 0 6px 16px rgba(255, 87, 34, 0.3); }
        .btn-main:active { transform: translateY(1px); box-shadow: 0 2px 4px rgba(255, 87, 34, 0.2); }

        .btn-secondary { background: white; color: var(--pro-text); font-weight: 600; border: 1.5px solid var(--pro-border); border-radius: 6px; box-shadow: var(--tactile-shadow-sm); transition: all 0.2s ease; cursor: pointer;}
        .btn-secondary:active { transform: translate(2px, 2px); box-shadow: 0 0 0 transparent; }
        
        .status-badge { font-family: 'IBM Plex Mono'; font-weight: 600; font-size: 0.7rem; padding: 4px 10px; text-transform: uppercase; letter-spacing: 0.05em; border-radius: 6px; border: 1px solid; }
        .badge-proposal { background: #F1F5F9; color: #475569; border-color: #E2E8F0; }
        .badge-progress { background: #EFF6FF; color: #1D4ED8; border-color: #BFDBFE; }
        .badge-complete { background: #F0FDF4; color: #15803D; border-color: #BBF7D0; }

        .timeline-container { position: relative; padding-left: 26px; }
        .timeline-line { position: absolute; left: 8px; top: 0; bottom: 0; width: 2px; background: #E2E8F0; }
        .timeline-item { position: relative; padding-bottom: 32px; animation: fadeIn 0.4s ease-out forwards; }
        
        .timeline-dot { position: absolute; left: -22px; top: 4px; width: 10px; height: 10px; background: white; border: 2.5px solid; border-radius: 50%; z-index: 10; box-shadow: 0 0 0 4px var(--pro-bg); }
        .dot-action { border-color: #10B981; background: #10B981; }
        .dot-photo { border-color: #94A3B8; }
        .dot-msg { border-color: #3B82F6; }
        .dot-gps { left: -20px; top: 2px; width: 6px; height: 6px; border-width: 1.5px; border-color: #F59E0B; }

        .chat-bubble { padding: 12px 16px; border-radius: 16px; font-size: 0.875rem; line-height: 1.5; max-width: 85%; position: relative; box-shadow: 0 1px 2px rgba(0,0,0,0.05); }
        .chat-contractor { background: #F1F5F9; border: 1px solid #E2E8F0; color: #1E293B; border-top-left-radius: 4px; align-self: flex-start; }
        .chat-customer { background: #2563EB; border: 1px solid #1D4ED8; color: white; border-top-right-radius: 4px; align-self: flex-end; box-shadow: 0 2px 8px rgba(37, 99, 235, 0.2); }

        .teleport-out { transform: translateY(15px) scale(0.98); opacity: 0; pointer-events: none; transition: 0.3s ease-in; }
        .log-entry-approved { border-left: 4px solid #10B981 !important; animation: slideIn 0.4s ease-out; }
        
        canvas#sig-canvas { cursor: crosshair; background: #fff; width: 100%; height: 120px; border: 1.5px dashed var(--pro-border); border-radius: 6px; touch-action: none; transition: all 0.2s; }
        canvas#sig-canvas:hover { border-color: #94A3B8; background: #F8FAFC; }
        
        .pro-input { border: 1.5px solid var(--pro-border); border-radius: 6px; transition: all 0.2s; background: #fff; box-shadow: inset 0 2px 4px rgba(0,0,0,0.02); }
        .pro-input:focus { outline: none; border-color: var(--pro-orange); box-shadow: 0 0 0 3px rgba(255, 87, 34, 0.1); }

        @keyframes slideIn { from { opacity: 0; transform: translateY(-15px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(5px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body class="grid-bg pb-40 border-t-4 border-[#FF5722]">

    <nav class="bg-white/90 backdrop-blur-md border-b border-slate-200 p-4 sticky top-0 z-50 shadow-sm">
        <div class="max-w-2xl mx-auto flex flex-wrap justify-between items-center gap-4">
            <div class="flex items-baseline gap-2.5">
                <span class="brand-logo text-2xl text-slate-900 cursor-pointer" onclick="location.reload()">ProLink</span>
                <span class="text-slate-300 font-light text-xl hidden sm:inline">/</span>
                <span class="font-bold text-xs text-[#FF5722] uppercase tracking-widest mt-0.5">Davis Master Bath</span>
            </div>
            <div id="master-status" class="status-badge badge-proposal">Proposal</div>
        </div>
    </nav>

    <main class="max-w-2xl mx-auto p-4 md:p-6 space-y-8 md:space-y-10 mt-2">

        <div id="view-bid" class="view-pane active space-y-8">
            <header class="space-y-2">
                <h2 class="text-3xl md:text-5xl font-extrabold tracking-tight text-slate-900 leading-tight">Davis Master Bath</h2>
                <div class="flex items-center gap-2 text-sm font-bold text-[#FF5722]">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path></svg>
                    123 Holland Road
                </div>
            </header>
            
            <div class="space-y-4">
                <div class="pro-card p-5 border-l-[4px] border-l-slate-800 flex flex-wrap items-center justify-between gap-4">
                    <div class="flex items-center gap-4">
                        <img src="https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?auto=format&fit=crop&w=150&q=80" class="w-12 h-12 rounded-full object-cover border border-slate-200 shadow-sm" alt="Mike Sorrenson">
                        <div>
                            <h3 class="font-bold text-sm text-slate-900 leading-none">Prepared by Sorrenson Tile</h3>
                            <p class="text-[11px] mono text-slate-500 mt-1.5 tracking-wide uppercase">Mike Sorrenson • LIC #99281-B</p>
                        </div>
                    </div>
                    <div class="flex items-center gap-1.5 text-[11px] font-bold text-emerald-700 bg-emerald-50 px-3 py-1.5 rounded uppercase tracking-wide border border-emerald-200">
                        <svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M5 13l4 4L19 7"></path></svg>
                        Verified Pro
                    </div>
                </div>

                <div class="flex flex-col gap-1.5 w-full md:pl-8">
                    <div class="chat-bubble chat-contractor">
                        Hey! Here is the detailed proposal and milestone breakdown for the master bath. You can review and authorize the project hold directly through this secure link. Let me know if you have questions!
                        <span class="block text-[10px] font-medium text-slate-400 mt-1">10:42 AM</span>
                    </div>
                    <span class="text-[10px] font-bold text-slate-400 ml-2 uppercase tracking-wide">Sent via SMS</span>
                </div>
            </div>

            <div class="pro-card p-6 md:p-8 space-y-8">
                <div>
                    <h3 class="mono text-xs font-bold text-slate-400 uppercase tracking-widest border-b border-slate-200 pb-3 mb-5">Itemized Scope of Work</h3>
                    <div class="space-y-5">
                        <div class="group">
                            <div class="flex justify-between items-baseline gap-4 mb-1">
                                <span class="font-bold text-sm md:text-base text-slate-800">Waterproofing System</span>
                                <span class="font-semibold text-slate-900">$1,850</span>
                            </div>
                            <p class="text-xs md:text-sm text-slate-500 leading-relaxed pr-8">Demo of pan, Kerdi-Board install, and 24hr flood test.</p>
                        </div>
                        <div class="group">
                            <div class="flex justify-between items-baseline gap-4 mb-1">
                                <span class="font-bold text-sm md:text-base text-slate-800">Main Floor & Wall Tile</span>
                                <span class="font-semibold text-slate-900">$2,400</span>
                            </div>
                            <p class="text-xs md:text-sm text-slate-500 leading-relaxed pr-8">12x24 Porcelain with 1/16" grout lines.</p>
                        </div>
                        <div class="group">
                            <div class="flex justify-between items-baseline gap-4 mb-1">
                                <span class="font-bold text-sm md:text-base text-slate-800">Grout & Sealant</span>
                                <span class="font-semibold text-slate-900">$450</span>
                            </div>
                            <p class="text-xs md:text-sm text-slate-500 leading-relaxed pr-8">Epoxy-based stain resistant grout in 'Driftwood'.</p>
                        </div>
                    </div>
                </div>
                
                <div class="bg-slate-50 rounded-lg border border-slate-200 p-5">
                    <h3 class="mono text-[10px] font-bold text-slate-500 uppercase tracking-widest mb-4">Milestone Payment Schedule</h3>
                    <div class="space-y-3 text-sm">
                        <div class="flex justify-between items-center pb-3 border-b border-slate-200">
                            <span class="font-medium text-slate-700">Phase 1: Waterproofing & Inspection</span>
                            <span class="font-bold text-slate-900">$1,850.00</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="font-medium text-slate-700">Phase 2: Final Completion Balance</span>
                            <span class="font-bold text-slate-900">$2,850.00</span>
                        </div>
                    </div>
                </div>
                
                <div class="pt-2 border-t-2 border-slate-200 flex justify-between items-end">
                    <div class="space-y-1">
                        <span class="mono text-[11px] font-bold text-slate-500 uppercase tracking-widest">Total Investment</span>
                        <p class="text-[11px] text-slate-400 font-medium">Funds held securely until milestones are approved</p>
                    </div>
                    <span class="text-2xl md:text-3xl font-extrabold tracking-tight text-slate-900">$4,700.00</span>
                </div>
            </div>
            
            <button onclick="navigate('view-contract')" class="btn-main py-4">Review Agreement</button>
        </div>

        <div id="view-contract" class="view-pane space-y-6">
            <div class="pro-card p-6 md:p-8">
                <h2 class="font-extrabold text-2xl md:text-3xl tracking-tight text-slate-900 mb-6">Agreement Terms</h2>
                <div class="bg-slate-50 border border-slate-200 rounded p-5 h-52 overflow-y-auto mb-8 text-sm text-slate-600 leading-relaxed space-y-4 shadow-inner">
                    <p><strong class="text-slate-900">1. PERFORMANCE:</strong> Work performed according to TCNA standards.</p>
                    <p><strong class="text-slate-900">2. MILESTONE PAYMENTS:</strong> Funds securely vaulted. Released to contractor solely upon photo-proof validation by homeowner.</p>
                    <p><strong class="text-slate-900">3. MODIFICATIONS:</strong> Change orders required for any scope adjustments. Must be signed via ProLink.</p>
                    <p><strong class="text-slate-900">4. WARRANTY:</strong> 1-Year limited workmanship warranty begins upon final ledger clearance.</p>
                </div>
                
                <div class="space-y-4">
                    <div class="flex items-center justify-between mb-2 border-b border-slate-100 pb-2">
                        <h3 class="mono text-xs font-bold text-slate-400 uppercase tracking-widest">Payment Authorization</h3>
                        <svg class="w-5 h-5 text-slate-300" fill="currentColor" viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 15h-2v-2h2v2zm0-4h-2V7h2v6z"/></svg>
                    </div>
                    
                    <input type="text" placeholder="Name on Card" class="pro-input w-full p-3.5 text-sm text-slate-800 placeholder-slate-400">
                    <div class="flex flex-col sm:flex-row gap-4">
                        <input type="text" placeholder="Card Number" class="pro-input w-full sm:w-1/2 p-3.5 text-sm text-slate-800 placeholder-slate-400">
                        <div class="flex gap-4 w-full sm:w-1/2">
                            <input type="text" placeholder="MM/YY" class="pro-input w-1/2 p-3.5 text-sm text-slate-800 placeholder-slate-400">
                            <input type="text" placeholder="CVC" class="pro-input w-1/2 p-3.5 text-sm text-slate-800 placeholder-slate-400">
                        </div>
                    </div>
                    
                    <div class="relative mt-6">
                        <canvas id="sig-canvas"></canvas>
                        <div class="absolute top-3 left-4 pointer-events-none text-[11px] mono text-slate-400 uppercase font-bold tracking-wide">Draw Signature Below</div>
                    </div>

                    <div class="flex gap-3 items-start bg-slate-50 p-4 rounded border border-slate-200 mt-6">
                        <svg class="w-5 h-5 text-slate-400 shrink-0 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                        <p class="text-xs text-slate-600 leading-relaxed">
                            <strong class="text-slate-800 font-semibold">Authorization Only.</strong> A temporary hold is placed for the project value. Funds remain in your control and do not transfer until you explicitly approve timeline milestones.
                        </p>
                    </div>
                </div>
                <button onclick="navigate('view-heartbeat')" class="btn-main py-4 mt-8">Sign & Authorize Hold</button>
            </div>
        </div>

        <div id="view-heartbeat" class="view-pane space-y-8">
            <div class="flex justify-between items-end border-b border-slate-200 pb-3 px-1">
                <h2 id="dynamic-action-title" class="mono text-xs font-bold text-slate-500 uppercase tracking-widest">Project Dashboard</h2>
                <button onclick="navigate('view-vault')" class="flex items-center gap-1.5 text-xs font-bold text-slate-600 uppercase hover:text-[#FF5722] transition-colors tracking-wide">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 8h14M5 8a2 2 0 110-4h14a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4"></path></svg>
                    Vault
                </button>
            </div>

            <section id="section-actions" class="space-y-5">
                <div id="card-payment" class="pro-card p-6 md:p-8 relative overflow-hidden bg-white border-l-[6px] border-l-[#FF5722]">
                    <div class="flex justify-between items-start mb-4">
                        <div>
                            <span class="inline-block bg-orange-50 text-[#FF5722] text-[10px] font-bold uppercase tracking-widest px-2.5 py-1 rounded mb-2 border border-orange-100">Action Required</span>
                            <h3 class="font-extrabold text-xl md:text-2xl text-slate-900 tracking-tight">Release Milestone</h3>
                        </div>
                        <span class="text-2xl font-extrabold text-slate-900 tracking-tight">$1,850</span>
                    </div>
                    <div class="bg-slate-50 rounded border border-slate-100 p-4 mb-6">
                        <p class="text-sm font-semibold text-slate-800">Phase 1: Waterproofing & Inspection</p>
                        <p class="text-xs text-slate-500 mt-1">Review the photo timeline below to verify completion.</p>
                    </div>
                    <button onclick="approveItem('card-payment', 'Payment Released: Phase 1', '$1,850.00', true)" class="btn-main py-4 text-base">Verify & Release Funds</button>
                </div>

                <div id="card-change-order" class="pro-card p-5 md:p-6 flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 bg-orange-50/30 border-orange-200">
                    <div>
                        <div class="flex items-center gap-2 mb-1.5">
                            <span class="w-2 h-2 rounded-full bg-amber-500"></span>
                            <h4 class="font-bold text-sm md:text-base text-slate-900">Pending Change Order</h4>
                        </div>
                        <p class="text-sm text-slate-700 pl-4 font-medium">Custom niche tile upgrade <span class="font-bold text-slate-900 ml-1">(+$180.00)</span></p>
                    </div>
                    <button onclick="approveItem('card-change-order', 'Change Order Approved', '+$180.00', false)" class="btn-secondary px-6 py-2.5 text-sm w-full sm:w-auto">Review & Sign</button>
                </div>

                <div id="card-final-release" class="hidden pro-card p-6 md:p-8 border-2 border-slate-800 bg-slate-50">
                    <div class="flex justify-between items-start mb-4">
                        <div>
                            <span class="inline-block bg-slate-200 text-slate-700 text-[10px] font-bold uppercase tracking-widest px-2.5 py-1 rounded mb-2">Final Action</span>
                            <h3 class="font-extrabold text-xl md:text-2xl text-slate-900 tracking-tight">Final Project Release</h3>
                        </div>
                        <span class="text-2xl font-extrabold text-slate-900 tracking-tight">$2,850</span>
                    </div>
                    <p class="text-sm text-slate-500 mb-6 font-medium">Clear the completion balance to lock the project ledger and access your Vault.</p>
                    <button onclick="approveItem('card-final-release', 'Final Funds Released', '$2,850.00', true, true)" class="btn-main py-4 text-base">Approve Final Closeout</button>
                </div>

                <div id="card-referral" class="hidden pro-card p-6 md:p-8 border-l-[4px] border-[#FF5722]">
                    <h3 class="font-extrabold text-xl md:text-2xl text-slate-900 tracking-tight mb-2">Project Complete</h3>
                    <p class="text-sm text-slate-600 mb-6 leading-relaxed">Mike's work is finished. Sharing a review helps their business tremendously, and your digital archive is ready in the Vault.</p>
                    <div class="flex flex-col sm:flex-row gap-3">
                        <button class="flex-1 bg-slate-800 text-white rounded py-3 font-semibold text-sm hover:bg-slate-700 transition-colors">Write a Review</button>
                        <button class="flex-1 btn-secondary py-3 font-semibold text-sm">Share Profile</button>
                    </div>
                </div>
            </section>

            <section class="space-y-6">
                <h2 class="mono text-[11px] font-bold text-slate-400 uppercase tracking-widest border-b border-slate-200 pb-2">Activity Log</h2>
                
                <div id="card-schedule" class="pro-card p-4 bg-white flex items-center shadow-sm">
                    <div class="flex gap-4 items-center">
                        <div class="bg-blue-50 border border-blue-100 p-2.5 rounded text-blue-600">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg>
                        </div>
                        <div>
                            <p class="mono text-[10px] font-bold text-slate-400 uppercase tracking-widest">Next Scheduled Arrival</p>
                            <p class="text-sm font-bold text-slate-800 mt-0.5">Tomorrow @ 8:15 AM</p>
                        </div>
                    </div>
                </div>

                <div class="timeline-container pt-3 md:ml-2">
                    <div class="timeline-line"></div>
                    <div id="dynamic-log"></div> 
                    
                    <div class="timeline-item pb-6">
                        <div class="timeline-dot dot-gps"></div>
                        <div class="flex items-center gap-2">
                            <svg class="w-3.5 h-3.5 text-amber-500" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z" clip-rule="evenodd"></path></svg>
                            <p class="text-xs font-semibold text-slate-500">GPS Verified Site Check-in <span class="font-normal text-slate-400 ml-1">Today @ 8:15 AM</span></p>
                        </div>
                    </div>

                    <div class="timeline-item">
                        <div class="timeline-dot dot-photo"></div>
                        <p class="mono text-[10px] font-bold text-slate-500 uppercase tracking-widest mb-2.5">Today @ 1:08 PM — Photo Update</p>
                        <div class="pro-card p-1.5 border-slate-200 relative group cursor-pointer">
                            <div class="relative overflow-hidden rounded">
                                <img src="https://images.unsplash.com/photo-1600585152220-90363fe7e115?auto=format&fit=crop&w=800&q=80" class="w-full h-48 md:h-64 object-cover" alt="Work progress">
                                <div class="absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center">
                                    <div class="bg-white/90 backdrop-blur rounded-full p-2.5 text-slate-900 shadow-lg">
                                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0zM10 7v3m0 0v3m0-3h3m-3 0H7"></path></svg>
                                    </div>
                                </div>
                            </div>
                            <div class="p-3 bg-white">
                                <p class="text-sm font-medium text-slate-700"><span class="font-bold text-slate-900 mr-1">Note:</span>Kerdi waterproofing membrane installed. Drain flange secured and taped.</p>
                            </div>
                        </div>
                    </div>

                    <div class="timeline-item">
                        <div class="timeline-dot dot-msg"></div>
                        <p class="mono text-[10px] font-bold text-slate-500 uppercase tracking-widest mb-3">Yesterday — SMS Thread</p>
                        <div class="flex flex-col gap-3 w-full pr-4">
                            <div class="chat-bubble chat-contractor">
                                Flood test is holding perfectly. City inspector confirmed for tomorrow morning.
                                <span class="block text-[10px] font-medium text-slate-400 mt-1">4:30 PM</span>
                            </div>
                            <div class="chat-bubble chat-customer">
                                Awesome, thanks for the update! Will you need me to unlock the side gate in the morning?
                                <span class="block text-[10px] font-medium text-blue-200 mt-1 text-right">4:45 PM</span>
                            </div>
                            <div class="chat-bubble chat-contractor">
                                Yes please, that would be great. See you tomorrow.
                                <span class="block text-[10px] font-medium text-slate-400 mt-1">5:02 PM</span>
                            </div>
                        </div>
                    </div>

                    <div class="timeline-item">
                        <div class="timeline-dot dot-photo"></div>
                        <p class="mono text-[10px] font-bold text-slate-500 uppercase tracking-widest mb-2.5">Feb 18 @ 9:15 AM — Photo Update</p>
                        <div class="pro-card p-1.5 border-slate-200 relative group cursor-pointer">
                            <div class="relative overflow-hidden rounded">
                                <img src="https://images.unsplash.com/photo-1581094794329-c8112a89af12?auto=format&fit=crop&w=800&q=80" class="w-full h-32 md:h-40 object-cover opacity-90 grayscale group-hover:grayscale-0 transition-all duration-300" alt="Initial demolition">
                                <div class="absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center">
                                    <div class="bg-white/90 backdrop-blur rounded-full p-2.5 text-slate-900 shadow-lg">
                                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0zM10 7v3m0 0v3m0-3h3m-3 0H7"></path></svg>
                                    </div>
                                </div>
                            </div>
                            <div class="p-3 bg-white">
                                <p class="text-sm font-medium text-slate-700">Initial shower pan demolition complete. Subfloor looks good and rot-free.</p>
                            </div>
                        </div>
                    </div>

                </div>
            </section>
        </div>

        <div id="view-vault" class="view-pane space-y-8">
            <header>
                <h2 class="text-3xl md:text-5xl font-extrabold tracking-tight text-slate-900 leading-tight">Project Vault</h2>
                <p id="vault-subtitle" class="mono text-xs font-bold text-slate-500 uppercase mt-3 tracking-widest">Secure Document & Financial Archive</p>
            </header>
            
            <div class="space-y-6">
                <div>
                    <h3 class="text-sm font-bold text-slate-800 mb-3 border-b border-slate-200 pb-2">Project Documents</h3>
                    <div class="space-y-2">
                        <div class="pro-card p-4 flex justify-between items-center bg-white hover:border-slate-400">
                            <div class="flex items-center gap-3">
                                <div class="p-2 bg-slate-50 rounded border border-slate-100">
                                    <svg class="w-4 h-4 text-slate-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg>
                                </div>
                                <p class="text-sm font-bold text-slate-800">Executed Agreement</p>
                            </div>
                            <button class="btn-secondary px-3 py-1.5 text-xs">PDF</button>
                        </div>
                        <div class="pro-card p-4 flex justify-between items-center bg-white hover:border-slate-400">
                            <div class="flex items-center gap-3">
                                <div class="p-2 bg-slate-50 rounded border border-slate-100">
                                    <svg class="w-4 h-4 text-slate-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"></path></svg>
                                </div>
                                <p class="text-sm font-bold text-slate-800">Build Plans & Permits</p>
                            </div>
                            <button class="btn-secondary px-3 py-1.5 text-xs">PDF</button>
                        </div>
                    </div>
                </div>

                <div>
                    <h3 class="text-sm font-bold text-slate-800 mb-3 border-b border-slate-200 pb-2">Media & Records</h3>
                    <div class="space-y-2">
                        <div class="pro-card p-4 flex justify-between items-center bg-white hover:border-slate-400">
                            <div class="flex items-center gap-3">
                                <div class="p-2 bg-slate-50 rounded border border-slate-100">
                                    <svg class="w-4 h-4 text-slate-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg>
                                </div>
                                <div>
                                    <p class="text-sm font-bold text-slate-800">High-Res Photo Gallery</p>
                                    <p class="text-[10px] text-slate-500">External gallery link</p>
                                </div>
                            </div>
                            <button class="btn-secondary px-3 py-1.5 text-xs">View</button>
                        </div>
                        <div class="pro-card p-4 flex justify-between items-center bg-white hover:border-slate-400">
                            <div class="flex items-center gap-3">
                                <div class="p-2 bg-slate-50 rounded border border-slate-100">
                                    <svg class="w-4 h-4 text-slate-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                                </div>
                                <p class="text-sm font-bold text-slate-800">Complete Timeline Archive</p>
                            </div>
                            <button class="btn-secondary px-3 py-1.5 text-xs">Download ZIP</button>
                        </div>
                    </div>
                </div>

                <div>
                    <h3 class="text-sm font-bold text-slate-800 mb-3 border-b border-slate-200 pb-2">Financials</h3>
                    <div id="vault-tax-row" class="pro-card p-4 md:p-5 flex justify-between items-center bg-slate-50 opacity-70">
                        <div>
                            <p class="text-sm font-bold text-slate-800">Financial Ledger & Receipts</p>
                            <p id="tax-msg" class="text-[10px] font-medium text-slate-500 mt-1">Pending Project Completion</p>
                        </div>
                        <span id="tax-status-badge" class="mono text-[10px] bg-slate-200 text-slate-600 px-2.5 py-1 rounded font-bold uppercase tracking-wider">Locked</span>
                    </div>
                </div>
            </div>
            
            <button onclick="navigate('view-heartbeat')" class="w-full btn-secondary py-4 text-sm mt-8">← Back to Dashboard</button>
        </div>

        <footer class="pt-12 pb-24 text-center">
            <p class="brand-logo text-sm text-slate-400">Powered by ProLink</p>
            <p class="text-[10px] font-bold text-slate-400 mt-1 tracking-widest uppercase">Secure Project Governance</p>
        </footer>

    </main>

    <nav id="nav-footer" class="fixed bottom-4 inset-x-4 max-w-2xl mx-auto z-[100] flex gap-3 hidden">
        <button class="flex-[3] bg-slate-800 text-white rounded py-3.5 font-semibold text-sm shadow-[0_4px_12px_rgba(30,41,59,0.2)] hover:bg-slate-700 transition-colors border border-slate-700">Message Mike</button>
        <button id="btn-vault-toggle" onclick="navigate('view-vault')" class="flex-1 btn-secondary py-3.5 text-sm bg-white/90 backdrop-blur">Vault</button>
    </nav>

    <script>
        let isProjectComplete = false;

        function navigate(viewId) {
            document.querySelectorAll('.view-pane').forEach(v => v.classList.remove('active'));
            document.getElementById(viewId).classList.add('active');
            const status = document.getElementById('master-status');
            const footer = document.getElementById('nav-footer');
            
            if(viewId === 'view-bid' || viewId === 'view-contract') {
                status.innerText = "PROPOSAL"; status.className = "status-badge badge-proposal";
                footer.style.display = 'none';
                if(viewId === 'view-contract') setTimeout(initSignature, 100);
            } else {
                footer.style.display = 'flex';
                status.innerText = isProjectComplete ? "COMPLETE" : "ACTIVE";
                status.className = isProjectComplete ? "status-badge badge-complete" : "status-badge badge-progress";
                document.getElementById('btn-vault-toggle').innerHTML = (viewId === 'view-vault') ? "Back" : "Vault";
            }
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function initSignature() {
            const canvas = document.getElementById('sig-canvas');
            if(!canvas) return;
            const ctx = canvas.getContext('2d');
            let drawing = false;
            canvas.width = canvas.parentElement.offsetWidth; canvas.height = 120;
            ctx.strokeStyle = '#1E293B';
            
            const stop = () => { drawing = false; ctx.beginPath(); };
            const draw = (e) => {
                if (!drawing) return;
                const rect = canvas.getBoundingClientRect();
                const x = (e.clientX || e.touches[0].clientX) - rect.left;
                const y = (e.clientY || e.touches[0].clientY) - rect.top;
                ctx.lineWidth = 2.5; ctx.lineCap = 'round'; ctx.lineTo(x, y); ctx.stroke(); ctx.beginPath(); ctx.moveTo(x, y);
            };
            canvas.addEventListener('mousedown', () => drawing = true);
            canvas.addEventListener('mouseup', stop);
            canvas.addEventListener('mousemove', draw);
            canvas.addEventListener('touchstart', (e) => { e.preventDefault(); drawing = true; }, {passive: false});
            canvas.addEventListener('touchend', stop);
            canvas.addEventListener('touchmove', (e) => { e.preventDefault(); draw(e); }, {passive: false});
            
            window.addEventListener('resize', () => { if(document.getElementById('view-contract').classList.contains('active')) canvas.width = canvas.parentElement.offsetWidth; });
        }

        function approveItem(cardId, title, amount, triggersNext, isFinal = false) {
            const card = document.getElementById(cardId);
            card.classList.add('teleport-out');
            setTimeout(() => {
                card.style.display = 'none';
                const log = document.getElementById('dynamic-log');
                const entry = document.createElement('div');
                entry.className = "timeline-item";
                entry.innerHTML = `
                    <div class="timeline-dot dot-action"></div>
                    <p class="mono text-[10px] text-emerald-600 font-bold uppercase tracking-widest mb-2.5">Just Now — Verified Action</p>
                    <div class="pro-card p-4 md:p-5 log-entry-approved bg-emerald-50/50 border-emerald-200">
                        <p class="text-sm font-bold text-slate-900">${title}</p>
                        <p class="text-xs font-medium text-slate-600 mt-1">${amount} securely logged to Ledger.</p>
                    </div>
                `;
                log.prepend(entry);
                if(triggersNext && !isFinal) {
                    const next = document.getElementById('card-final-release');
                    next.classList.remove('hidden');
                    next.classList.add('animate-[slideIn_0.4s_ease-out]');
                }
                if (isFinal) triggerProjectCompletion();
            }, 300); 
        }

        function triggerProjectCompletion() {
            isProjectComplete = true;
            document.getElementById('master-status').innerText = "COMPLETE";
            document.getElementById('master-status').className = "status-badge badge-complete";
            
            const scheduleCard = document.getElementById('card-schedule');
            if(scheduleCard) scheduleCard.style.display = 'none';
            document.getElementById('card-referral').classList.remove('hidden');
            
            const taxRow = document.getElementById('vault-tax-row');
            taxRow.classList.remove('opacity-70', 'bg-slate-50');
            taxRow.classList.add('bg-white', 'hover:border-slate-400');
            document.getElementById('tax-msg').innerText = "For Home Cost Basis & ROI Tracking";
            document.getElementById('tax-msg').classList.remove('text-slate-500');
            document.getElementById('tax-msg').classList.add('text-emerald-700');
            document.getElementById('tax-status-badge').outerHTML = `<button class="btn-secondary border-emerald-200 bg-emerald-50 text-emerald-800 px-3 py-1.5 text-xs hover:bg-emerald-100">Download PDF</button>`;
        }
    </script>
</body>
</html>
