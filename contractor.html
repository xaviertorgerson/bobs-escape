<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ProLink | Master Contractor OS</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&family=IBM+Plex+Mono:wght@500;600;700&display=swap" rel="stylesheet">
    <style>
        :root { 
            --pro-orange: #FF5722; --pro-orange-hover: #E64A19;
            --pro-text: #0F172A; --pro-border: #CBD5E1; --pro-bg: #F8FAFC; 
            --tactile-shadow: 4px 4px 0px rgba(30, 41, 59, 0.12);
            --tactile-shadow-sm: 2px 2px 0px rgba(30, 41, 59, 0.08);
        }
        
        body { font-family: 'Inter', sans-serif; background: var(--pro-bg); color: var(--pro-text); overflow-x: hidden; -webkit-font-smoothing: antialiased; }
        .mono { font-family: 'IBM Plex Mono', monospace; }
        .brand-logo { font-family: 'Inter', sans-serif; font-weight: 900; letter-spacing: -0.04em; }
        .grid-bg { background-image: radial-gradient(rgba(148, 163, 184, 0.3) 1px, transparent 1px); background-size: 24px 24px; }
        
        /* Core UI Components */
        .pro-card { background: white; border: 1.5px solid var(--pro-border); border-radius: 8px; box-shadow: var(--tactile-shadow); position: relative; transition: all 0.2s ease; }
        .pro-input { border: 1.5px solid var(--pro-border); border-radius: 6px; padding: 14px; transition: all 0.2s; background: #fff; width: 100%; font-size: 1rem; box-shadow: inset 0 2px 4px rgba(0,0,0,0.02); }
        .pro-input:focus { outline: none; border-color: var(--pro-orange); box-shadow: 0 0 0 3px rgba(255, 87, 34, 0.1); }
        
        .btn-main { background: var(--pro-orange); color: white; font-weight: 800; font-size: 1rem; border-radius: 6px; box-shadow: 0 4px 12px rgba(255, 87, 34, 0.25); transition: all 0.2s ease; cursor: pointer; display: inline-flex; align-items: center; justify-content: center; padding: 14px 20px; border: 1px solid transparent; width: 100%; }
        .btn-main:active { transform: translateY(2px); box-shadow: 0 2px 4px rgba(255, 87, 34, 0.2); }
        .btn-secondary { background: white; color: var(--pro-text); font-weight: 700; font-size: 0.9rem; border: 1.5px solid var(--pro-border); border-radius: 6px; box-shadow: var(--tactile-shadow-sm); transition: all 0.2s ease; cursor: pointer; padding: 14px 16px; display: inline-flex; align-items: center; justify-content: center; width: 100%; }
        .btn-secondary:active { transform: translate(2px, 2px); box-shadow: none; }
        
        .btn-quick { display: flex; flex-direction: column; align-items: center; justify-content: center; gap: 8px; background: white; border: 1.5px solid var(--pro-border); border-radius: 8px; padding: 16px 8px; box-shadow: var(--tactile-shadow-sm); font-weight: 700; font-size: 0.75rem; color: var(--pro-text); transition: 0.1s; cursor: pointer;}
        .btn-quick:active { transform: translate(2px, 2px); box-shadow: none; background: #F8FAFC; }
        .btn-quick svg { width: 28px; height: 28px; color: var(--pro-orange); }

        .status-badge { font-family: 'IBM Plex Mono'; font-weight: 600; font-size: 0.65rem; padding: 4px 8px; text-transform: uppercase; letter-spacing: 0.05em; border-radius: 4px; border: 1px solid; }
        .badge-active { background: #ECFDF5; color: #059669; border-color: #A7F3D0; }
        .badge-pending { background: #FFFBEB; color: #D97706; border-color: #FDE68A; }
        .badge-complete { background: #F3F4F6; color: #475569; border-color: #D1D5DB; }
        
        /* Layouts & Animations */
        .view-pane { display: none; animation: fadeIn 0.2s ease-out; }
        .view-pane.active { display: block; }
        .app-layout { display: flex; min-height: 100vh; }
        .sidebar { width: 260px; background: white; border-right: 1.5px solid var(--pro-border); display: flex; flex-direction: column; z-index: 100; }
        .main-content { flex: 1; padding-bottom: 90px; } 
        .nav-item.active { background-color: #F1F5F9; color: #0F172A; font-weight: 700; border-right: 3px solid var(--pro-orange); }
        .mobile-nav-item.active { color: var(--pro-orange); }
        
        .modal-overlay { position: fixed; inset: 0; background: rgba(15, 23, 42, 0.6); backdrop-filter: blur(4px); z-index: 1000; display: none; align-items: flex-end; justify-content: center; opacity: 0; transition: opacity 0.2s; padding: 12px; }
        @media (min-width: 768px) { .modal-overlay { align-items: center; } }
        .modal-overlay.active { display: flex; opacity: 1; }
        .modal-content { transform: translateY(100%); transition: transform 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.1); max-width: 600px; width: 100%; max-height: 90vh; overflow-y: auto; border-radius: 12px; }
        .modal-overlay.active .modal-content { transform: translateY(0); }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(5px); } to { opacity: 1; transform: translateY(0); } }
        
        /* TIER LOGIC (CSS Driven Demo Mode) */
        .tier-lock-overlay { display: none; position: absolute; inset: 0; background: rgba(255,255,255,0.7); backdrop-filter: blur(2px); z-index: 10; border-radius: inherit; cursor: pointer; flex-direction: column; align-items: center; justify-content: center; text-align: center; padding: 1rem; }
        .tier-lock-icon { background: white; border: 1.5px solid #CBD5E1; padding: 8px 12px; border-radius: 20px; font-size: 0.75rem; font-weight: bold; box-shadow: 0 4px 6px rgba(0,0,0,0.05); color: #0F172A; display: flex; align-items: center; gap: 6px; }
        
        /* Starter Restrictions */
        body[data-tier="Starter"] .requires-solo { position: relative; pointer-events: auto; }
        body[data-tier="Starter"] .requires-solo > *:not(.tier-lock-overlay) { opacity: 0.3; pointer-events: none; user-select: none; }
        body[data-tier="Starter"] .requires-solo .tier-lock-overlay { display: flex; }
        
        /* Solo Restrictions */
        body[data-tier="Starter"] .requires-growth, body[data-tier="Solo"] .requires-growth { position: relative; pointer-events: auto; }
        body[data-tier="Starter"] .requires-growth > *:not(.tier-lock-overlay), body[data-tier="Solo"] .requires-growth > *:not(.tier-lock-overlay) { opacity: 0.3; pointer-events: none; user-select: none; }
        body[data-tier="Starter"] .requires-growth .tier-lock-overlay, body[data-tier="Solo"] .requires-growth .tier-lock-overlay { display: flex; }
        
        /* Hide Free callouts when premium */
        body[data-tier="Solo"] .free-callout, body[data-tier="Growth"] .free-callout { display: none !important; }

        @media (max-width: 768px) {
            .sidebar { display: none; }
            .mobile-nav { display: flex; }
        }
    </style>
</head>
<body class="grid-bg" data-tier="Solo">

    <div class="app-layout">
        <aside class="sidebar fixed h-screen top-0 left-0 hidden md:flex">
            <div class="p-6 border-b border-slate-200">
                <span class="brand-logo text-3xl text-slate-900 tracking-tighter cursor-pointer" onclick="switchView('view-dashboard', document.getElementById('nav-dashboard'))">ProLink</span>
                <button onclick="cycleTier()" class="demo-tier-btn mt-2 bg-slate-900 text-white mono text-[10px] font-bold uppercase tracking-widest px-2 py-1.5 rounded flex items-center justify-between w-full hover:bg-[#FF5722] transition-colors">
                    <span id="desktop-tier-label">Solo Plan</span>
                    <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"></path></svg>
                </button>
            </div>
            
            <nav class="flex-1 p-4 space-y-1">
                <a href="#" onclick="switchView('view-dashboard', this)" id="nav-dashboard" class="nav-item active flex items-center gap-3 px-4 py-3 text-slate-600 rounded-md font-semibold text-sm transition-colors">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"></path></svg>
                    Projects & Bids
                </a>
                <a href="#" onclick="switchView('view-reputation', this)" id="nav-reputation" class="nav-item flex items-center gap-3 px-4 py-3 text-slate-600 hover:bg-slate-50 rounded-md font-semibold text-sm transition-colors">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"></path></svg>
                    Brand & Reviews
                </a>
                <a href="#" onclick="switchView('view-billing', this)" id="nav-billing" class="nav-item flex items-center gap-3 px-4 py-3 text-slate-600 hover:bg-slate-50 rounded-md font-semibold text-sm transition-colors">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path></svg>
                    Plans & Billing
                </a>
            </nav>

            <div class="p-4 border-t border-slate-200">
                <div class="flex items-center gap-3">
                    <img src="https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?auto=format&fit=crop&w=150&q=80" class="w-10 h-10 rounded-full border border-slate-300">
                    <div>
                        <p class="text-sm font-bold text-slate-900">Mike Sorrenson</p>
                        <p class="mono text-[10px] text-slate-500 uppercase">Settings</p>
                    </div>
                </div>
            </div>
        </aside>

        <main class="main-content md:ml-[260px] w-full">
            
            <header class="md:hidden bg-white/90 backdrop-blur border-b border-slate-200 p-4 sticky top-0 z-50 flex justify-between items-center">
                <span class="brand-logo text-2xl text-slate-900 tracking-tighter" onclick="switchView('view-dashboard')">ProLink</span>
                <button onclick="cycleTier()" id="mobile-tier-label" class="text-[10px] font-bold bg-slate-900 text-white px-2 py-1.5 rounded uppercase tracking-widest flex items-center gap-1">
                    Solo <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"></path></svg>
                </button>
            </header>

            <div id="view-dashboard" class="view-pane active p-4 md:p-8 max-w-5xl mx-auto space-y-8">
                
                <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4">
                    <div>
                        <h1 class="text-3xl font-extrabold text-slate-900 tracking-tight">Project Pipeline</h1>
                    </div>
                    <button onclick="checkTierAction('Solo', 'modal-new-project')" class="btn-main w-full sm:w-auto py-3">
                        <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M12 4v16m8-8H4"></path></svg>
                        New Project / Bid
                    </button>
                </div>

                <div class="requires-solo">
                    <div class="tier-lock-overlay" onclick="openUpsell('Quick Bid Templates', 'Solo')">
                        <div class="tier-lock-icon">üîí Unlock Quick Bids</div>
                    </div>
                    <p class="text-xs font-bold text-slate-500 uppercase tracking-widest mb-3">1-Tap Quick Bids</p>
                    <div class="flex gap-3 overflow-x-auto pb-2 scrollbar-hide">
                        <button onclick="openModal('modal-quick-bid')" class="flex-shrink-0 bg-white border-2 border-slate-200 rounded-lg p-4 flex items-center gap-3 hover:border-[var(--pro-orange)] transition-colors shadow-sm">
                            <div class="w-10 h-10 rounded bg-blue-50 text-blue-500 flex items-center justify-center text-xl">üíß</div>
                            <div class="text-left">
                                <p class="font-bold text-sm text-slate-900">Pool Maintenance</p>
                                <p class="text-xs text-slate-500">$150.00 ‚Ä¢ Standard Cleaning</p>
                            </div>
                        </button>
                        <button onclick="openModal('modal-quick-bid')" class="flex-shrink-0 bg-white border-2 border-slate-200 rounded-lg p-4 flex items-center gap-3 hover:border-[var(--pro-orange)] transition-colors shadow-sm">
                            <div class="w-10 h-10 rounded bg-amber-50 text-amber-500 flex items-center justify-center text-xl">üîß</div>
                            <div class="text-left">
                                <p class="font-bold text-sm text-slate-900">Service Call / Diagnostic</p>
                                <p class="text-xs text-slate-500">$85.00 ‚Ä¢ 1 Hour Minimum</p>
                            </div>
                        </button>
                    </div>
                </div>

                <div>
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 md:gap-6">
                        
                        <div class="pro-card p-5 hover:border-slate-400 cursor-pointer border-t-[6px] border-t-[#FF5722]" onclick="switchView('view-project')">
                            <div class="flex justify-between items-start mb-3">
                                <span class="status-badge badge-active">Active</span>
                                <span class="mono text-xs font-bold text-slate-400">#PRJ-089</span>
                            </div>
                            <h3 class="text-xl font-extrabold text-slate-900">Davis Master Bath</h3>
                            <p class="text-sm font-medium text-slate-500 mb-4">123 Holland Road</p>
                            <div class="bg-slate-50 p-3 rounded border border-slate-100 flex justify-between items-center mb-4">
                                <span class="text-xs font-bold text-slate-700">Next Payout</span>
                                <span class="text-sm font-black text-slate-900">$1,850</span>
                            </div>
                            <div class="flex items-center gap-2">
                                <div class="w-2 h-2 rounded-full bg-[#FF5722] animate-pulse"></div>
                                <p class="text-xs text-slate-600 font-bold">Unread Client Text</p>
                            </div>
                        </div>

                        <div class="pro-card p-5 requires-solo">
                            <div class="tier-lock-overlay" onclick="openUpsell('Unlimited Projects', 'Solo')">
                                <div class="tier-lock-icon">üîí Unlock Multiple Projects</div>
                            </div>
                            <div class="flex justify-between items-start mb-3">
                                <span class="status-badge badge-pending">Pending Auth</span>
                                <span class="mono text-xs font-bold text-slate-400">#PRJ-090</span>
                            </div>
                            <h3 class="text-xl font-extrabold text-slate-900">Smith Kitchen</h3>
                            <p class="text-sm font-medium text-slate-500 mb-4">450 West Ave</p>
                            <div class="bg-slate-50 p-3 rounded border border-slate-100 flex justify-between items-center mb-4">
                                <span class="text-xs font-bold text-slate-700">Proposal Value</span>
                                <span class="text-sm font-black text-slate-900">$1,200</span>
                            </div>
                            <button class="btn-secondary py-2 text-xs w-full" onclick="switchView('view-bid-builder')">Edit & Resend</button>
                        </div>

                        <div class="pro-card p-5 requires-solo opacity-70">
                            <div class="tier-lock-overlay" onclick="openUpsell('Project History', 'Solo')"></div>
                            <div class="flex justify-between items-start mb-3">
                                <span class="status-badge badge-complete">Complete</span>
                                <span class="mono text-xs font-bold text-slate-400">#PRJ-088</span>
                            </div>
                            <h3 class="text-xl font-extrabold text-slate-900">Miller Patio</h3>
                            <p class="text-sm font-medium text-slate-500 mb-4">88 North Street</p>
                            <div class="bg-slate-50 p-3 rounded border border-slate-100 flex justify-between items-center">
                                <span class="text-xs font-bold text-slate-700">Ledger Closed</span>
                                <span class="text-xs font-black text-emerald-600">Paid ($3,400)</span>
                            </div>
                        </div>

                    </div>
                </div>
            </div>

            <div id="view-bid-builder" class="view-pane p-4 md:p-8 max-w-4xl mx-auto space-y-6">
                <div class="flex justify-between items-center">
                    <div>
                        <button onclick="switchView('view-dashboard')" class="text-xs font-bold text-slate-500 hover:text-slate-900 uppercase tracking-wider mb-2 block">‚Üê Cancel Bid</button>
                        <h1 class="text-3xl font-extrabold text-slate-900 tracking-tight">Draft Proposal</h1>
                    </div>
                </div>

                <div class="space-y-6">
                    <div class="pro-card p-6">
                        <h3 class="font-bold text-slate-900 mb-4">Client Details</h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <input type="text" class="pro-input py-3 md:col-span-2" placeholder="Project Name / Address">
                            <input type="text" class="pro-input py-3" placeholder="Customer Name">
                            <input type="tel" class="pro-input py-3" placeholder="Mobile Number (For SMS Link)">
                        </div>
                    </div>

                    <div class="pro-card p-0 overflow-hidden">
                        <div class="p-4 border-b border-slate-200 bg-slate-50 flex justify-between items-center">
                            <h3 class="font-bold text-slate-900">Line Items</h3>
                            <button class="text-xs font-bold text-[#FF5722] hover:underline">+ Add Custom</button>
                        </div>
                        <div class="p-6 space-y-4">
                            <div class="flex flex-col sm:flex-row gap-3 items-start sm:items-center">
                                <input type="text" class="pro-input py-3 flex-1 w-full" placeholder="e.g. Master Bath Demo">
                                <div class="relative w-full sm:w-32">
                                    <span class="absolute left-3 top-3.5 text-slate-400 font-bold">$</span>
                                    <input type="number" class="pro-input py-3 pl-7 w-full" placeholder="0.00">
                                </div>
                            </div>
                        </div>
                        <div class="bg-slate-900 p-6 text-white flex justify-between items-center">
                            <span class="text-sm font-medium text-slate-400">Total Calculation</span>
                            <span class="text-3xl font-extrabold">$0.00</span>
                        </div>
                    </div>

                    <div class="pro-card p-6">
                        <div class="flex justify-between items-center mb-4">
                            <h3 class="font-bold text-slate-900">Milestone Payment Schedule</h3>
                        </div>
                        <div class="space-y-3">
                            <div class="flex gap-4">
                                <input type="text" class="pro-input py-3 flex-1" value="Deposit / Material Costs">
                                <input type="text" class="pro-input py-3 w-32 font-bold" placeholder="$ Amount">
                            </div>
                            <div class="flex gap-4">
                                <input type="text" class="pro-input py-3 flex-1" value="Final Balance">
                                <input type="text" class="pro-input py-3 w-32 font-bold" placeholder="$ Amount">
                            </div>
                        </div>
                    </div>

                    <div class="sticky bottom-4 z-50 bg-white/90 backdrop-blur p-4 border border-slate-200 rounded-lg shadow-xl flex flex-col sm:flex-row gap-3">
                        <button class="btn-main flex-[2] py-4" onclick="btnAction(this, 'SMS Link Sent!')">Send to Client via SMS</button>
                        <button class="btn-secondary flex-1 bg-slate-900 text-white border-slate-900 hover:bg-slate-800" onclick="btnAction(this, 'Switching to Kiosk...')">Present In-Person</button>
                    </div>
                </div>
            </div>

            <div id="view-project" class="view-pane p-4 md:p-8 max-w-5xl mx-auto space-y-6">
                <div class="space-y-4">
                    <button onclick="switchView('view-dashboard')" class="text-xs font-bold text-slate-500 hover:text-slate-900 uppercase tracking-wider flex items-center gap-1 py-2">
                        ‚Üê Back to Projects
                    </button>
                    <div>
                        <h1 class="text-3xl font-extrabold text-slate-900 tracking-tight leading-none">Davis Master Bath</h1>
                        <p class="text-sm font-bold text-slate-600 mt-2">123 Holland Road ‚Ä¢ John Davis (555-0192)</p>
                    </div>
                </div>

                <div class="grid grid-cols-2 md:grid-cols-4 gap-3">
                    <button onclick="openModal('modal-add-log')" class="btn-quick">
                        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 13a3 3 0 11-6 0 3 3 0 016 0z"></path></svg>
                        Snap Progress
                    </button>
                    <button onclick="openModal('modal-eta')" class="btn-quick">
                        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                        Send ETA
                    </button>
                    <button onclick="openModal('modal-change-order')" class="btn-quick">
                        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg>
                        Change Order
                    </button>
                    <button onclick="openModal('modal-request-funds')" class="btn-quick text-[#FF5722]">
                        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                        Request Funds
                    </button>
                </div>

                <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 pt-4">
                    
                    <div class="lg:col-span-1 space-y-6">
                        <div class="pro-card p-5 bg-slate-900 text-white border-none shadow-none">
                            <p class="mono text-[10px] font-bold text-slate-400 uppercase tracking-widest mb-1">Vaulted Contract Value</p>
                            <h2 class="text-3xl font-extrabold tracking-tight mb-2">$4,700.00</h2>
                            <p class="text-xs text-emerald-400 font-bold mb-4">‚óè Funds Secured via Square</p>
                            
                            <div class="space-y-2">
                                <div class="bg-slate-800 rounded p-3 border border-slate-700">
                                    <div class="flex justify-between items-center">
                                        <span class="text-xs font-semibold text-slate-300">Phase 1: Demo</span>
                                        <span class="text-sm font-bold">$1,850</span>
                                    </div>
                                    <p class="text-[10px] text-emerald-400 uppercase mt-1 tracking-widest">Ready to Bill</p>
                                </div>
                                <div class="bg-slate-800 rounded p-3 border border-slate-700 opacity-60">
                                    <div class="flex justify-between items-center">
                                        <span class="text-xs font-semibold text-slate-300">Phase 2: Final</span>
                                        <span class="text-sm font-bold">$2,850</span>
                                    </div>
                                    <p class="text-[10px] text-slate-500 uppercase mt-1 tracking-widest">Pending</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="lg:col-span-2 space-y-4">
                        
                        <div class="requires-solo">
                            <div class="tier-lock-overlay" onclick="openUpsell('In-App SMS Routing', 'Solo')">
                                <div class="tier-lock-icon">üîí Unlock In-App Messaging</div>
                            </div>
                            <div class="pro-card p-2 flex items-center gap-2 bg-white sticky top-[72px] md:top-0 z-40">
                                <input type="text" placeholder="Send an SMS to John Davis..." class="flex-1 border-none focus:ring-0 text-sm px-3 py-3 outline-none font-medium">
                                <button class="bg-[#FF5722] text-white p-3 rounded-md hover:bg-[#E64A19] transition-colors">
                                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8"></path></svg>
                                </button>
                            </div>
                        </div>
                        
                        <div class="free-callout pro-card p-4 bg-blue-50 border-blue-200">
                            <p class="text-xs font-bold text-blue-800 mb-2">FREE TIER: SMS limitations active.</p>
                            <a href="sms:5550192" class="btn-secondary py-2 text-xs border-blue-300 text-blue-700 bg-white">Open Native Phone App to Text Client</a>
                        </div>

                        <div class="pro-card p-4 md:p-6 bg-slate-50/50">
                            <h3 class="mono text-[10px] font-bold text-slate-400 uppercase tracking-widest border-b border-slate-200 pb-2 mb-6">Activity Timeline</h3>
                            
                            <div class="space-y-6">
                                <div class="flex gap-3">
                                    <div class="w-8 h-8 rounded-full bg-blue-100 flex items-center justify-center shrink-0 border border-blue-200">
                                        <span class="font-bold text-blue-700 text-xs">JD</span>
                                    </div>
                                    <div class="flex-1 pt-0.5">
                                        <p class="text-[10px] font-bold text-slate-500 mb-1 uppercase tracking-wide">Customer ‚Ä¢ Just Now</p>
                                        <p class="text-sm text-slate-800 bg-white p-3 rounded-xl rounded-tl-none border border-slate-200 shadow-sm inline-block font-medium">Awesome, thanks for the update! Gate is unlocked.</p>
                                    </div>
                                </div>

                                <div class="flex gap-3">
                                    <div class="w-8 h-8 rounded-full bg-slate-200 flex items-center justify-center shrink-0 mt-1">
                                        <svg class="w-4 h-4 text-slate-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"></path></svg>
                                    </div>
                                    <div class="flex-1 pt-1">
                                        <p class="text-[10px] font-bold text-slate-500 mb-1 uppercase tracking-wide">You ‚Ä¢ 1:08 PM</p>
                                        <img src="https://images.unsplash.com/photo-1600585152220-90363fe7e115?auto=format&fit=crop&w=400&q=80" class="w-full h-40 object-cover rounded border border-slate-200 shadow-sm">
                                        <p class="text-xs text-slate-600 mt-2 font-medium">Pan is fully waterproofed and drain is set. Ready for flood test overnight.</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="view-reputation" class="view-pane p-4 md:p-8 max-w-4xl mx-auto space-y-6">
                <div class="mb-8">
                    <h1 class="text-3xl font-extrabold text-slate-900 tracking-tight">Reputation Engine</h1>
                    <p class="text-sm text-slate-500 mt-1">Convert finished projects into new leads on autopilot.</p>
                </div>

                <div class="requires-growth">
                    <div class="tier-lock-overlay" onclick="openUpsell('The Reputation Engine', 'Growth')">
                        <div class="tier-lock-icon">üîí Unlock Brand & Review Tools</div>
                    </div>

                    <div class="space-y-6">
                        <div class="pro-card p-6 md:p-8">
                            <div class="flex justify-between items-start mb-6">
                                <div>
                                    <h3 class="font-extrabold text-xl text-slate-900 flex items-center gap-2">
                                        <svg class="w-6 h-6 text-blue-500" viewBox="0 0 24 24" fill="currentColor"><path d="M21.35 11.1h-9.17v2.73h6.51c-.33 3.81-3.5 5.44-6.5 5.44C8.36 19.27 5 16.25 5 12c0-4.1 3.2-7.27 7.2-7.27 3.09 0 4.9 1.97 4.9 1.97L19 4.72S16.56 2 12.1 2C6.42 2 2.03 6.8 2.03 12c0 5.05 4.13 10 10.22 10 5.35 0 9.25-3.67 9.25-9.09 0-1.15-.15-1.81-.15-1.81z"/></svg>
                                        Automated Google Reviews
                                    </h3>
                                    <p class="text-sm text-slate-600 mt-1">Send a review request via SMS 24 hours after Final Payout.</p>
                                </div>
                            </div>
                            <div class="space-y-4">
                                <input type="url" class="pro-input" value="https://g.page/r/sorrensontile/review" placeholder="Your Google Review Link">
                                <textarea class="pro-input text-sm bg-blue-50" rows="3">Hi [Customer], it was a pleasure working on your project! If you are happy with the work, it would mean the world to us if you left a quick review here: [Google Link]</textarea>
                            </div>
                        </div>

                        <div class="pro-card p-6 md:p-8">
                            <div class="mb-6">
                                <h3 class="font-extrabold text-xl text-slate-900">Rich Proposals</h3>
                                <p class="text-sm text-slate-600 mt-1">Embed social proof directly into your bids to increase close rates.</p>
                            </div>
                            <label class="flex items-start gap-4 p-4 border-2 border-[#FF5722] bg-orange-50 rounded-lg cursor-pointer">
                                <input type="checkbox" checked class="w-5 h-5 mt-1 accent-[#FF5722]">
                                <div>
                                    <p class="font-bold text-slate-900">Attach Verified Testimonials</p>
                                    <p class="text-xs text-slate-600 mt-1">Automatically appends your 3 highest-rated recent reviews to the bottom of every new proposal link.</p>
                                </div>
                            </label>
                        </div>
                    </div>
                </div>
            </div>

            <div id="view-billing" class="view-pane p-4 md:p-8 max-w-6xl mx-auto space-y-6">
                <div class="text-center max-w-2xl mx-auto mb-10">
                    <h1 class="text-4xl font-extrabold text-slate-900 tracking-tight">Simple, predictable pricing.</h1>
                    <p class="text-base text-slate-600 mt-4">Whether you are closing your first deal or scaling your agency, we have a plan built for your margins.</p>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                    <div class="pro-card p-6 flex flex-col border-2 border-slate-200">
                        <div class="mb-4">
                            <h3 class="text-2xl font-extrabold text-slate-900">Starter</h3>
                            <p class="text-3xl font-black text-slate-900 mt-2">$0 <span class="text-sm text-slate-500 font-normal">/mo</span></p>
                            <p class="text-sm text-slate-500 mt-2 font-medium">Perfect for closing your first digital deal.</p>
                        </div>
                        <ul class="space-y-4 mb-8 text-sm text-slate-700 flex-1 mt-4">
                            <li class="flex items-start gap-2"><svg class="w-5 h-5 text-emerald-500 shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> <span class="font-bold">1 Active Project</span> limit</li>
                            <li class="flex items-start gap-2"><svg class="w-5 h-5 text-emerald-500 shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> Square Payment Links</li>
                            <li class="flex items-start gap-2 opacity-50"><svg class="w-5 h-5 text-slate-400 shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg> No dedicated SMS number</li>
                        </ul>
                        <button class="btn-secondary w-full py-3" onclick="setDemoTier('Starter')">Simulate Starter</button>
                    </div>

                    <div class="pro-card p-6 flex flex-col border-[3px] border-[#FF5722] shadow-xl relative scale-105 z-10 bg-white">
                        <div class="absolute top-0 inset-x-0 bg-[#FF5722] text-white text-[10px] font-bold uppercase tracking-widest text-center py-1 rounded-t-sm">Most Popular</div>
                        <div class="mb-4 mt-4">
                            <h3 class="text-2xl font-extrabold text-slate-900">Solo Pro</h3>
                            <p class="text-3xl font-black text-slate-900 mt-2">$39 <span class="text-sm text-slate-500 font-normal">/mo</span></p>
                            <p class="text-sm text-slate-600 mt-2 font-medium">The operating system for independent pros.</p>
                        </div>
                        <ul class="space-y-4 mb-8 text-sm text-slate-700 flex-1 mt-4">
                            <li class="flex items-start gap-2"><svg class="w-5 h-5 text-[#FF5722] shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> <span class="font-bold">Unlimited Projects</span></li>
                            <li class="flex items-start gap-2"><svg class="w-5 h-5 text-[#FF5722] shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> <span class="font-bold">Dedicated Local Twilio #</span></li>
                            <li class="flex items-start gap-2"><svg class="w-5 h-5 text-[#FF5722] shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> Bid Templates & In-App SMS</li>
                            <li class="flex items-start gap-2 opacity-50"><svg class="w-5 h-5 text-slate-400 shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg> No Brand/Reputation Engine</li>
                        </ul>
                        <button class="btn-main w-full py-3" onclick="setDemoTier('Solo')">Simulate Solo</button>
                    </div>

                    <div class="pro-card p-6 flex flex-col bg-slate-900 text-white border-slate-900">
                        <div class="mb-4">
                            <h3 class="text-2xl font-extrabold mt-3">Growth</h3>
                            <p class="text-3xl font-black mt-2">$149 <span class="text-sm text-slate-400 font-normal">/mo</span></p>
                            <p class="text-sm text-slate-400 mt-2 font-medium">Brand power for scaling agencies.</p>
                        </div>
                        <ul class="space-y-4 mb-8 text-sm text-slate-300 flex-1 mt-4">
                            <li class="flex items-start gap-2"><svg class="w-5 h-5 text-blue-400 shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> Everything in Solo, plus:</li>
                            <li class="flex items-start gap-2"><svg class="w-5 h-5 text-blue-400 shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> <span class="text-white font-bold">Auto-Review Chasing</span></li>
                            <li class="flex items-start gap-2"><svg class="w-5 h-5 text-blue-400 shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> <span class="text-white font-bold">Rich Proposals (Testimonials)</span></li>
                            <li class="flex items-start gap-2"><svg class="w-5 h-5 text-blue-400 shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> Sub-Contractor Seats</li>
                            <li class="flex items-start gap-2"><svg class="w-5 h-5 text-blue-400 shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> Custom Domain (portal.xyz)</li>
                        </ul>
                        <button class="btn-secondary w-full py-3 bg-white text-slate-900 border-none" onclick="setDemoTier('Growth')">Simulate Growth</button>
                    </div>

                </div>
            </div>

        </main>
        
        <nav class="mobile-nav fixed bottom-0 inset-x-0 bg-white border-t border-slate-200 z-[100] hidden justify-around items-center pb-safe">
            <button onclick="switchView('view-dashboard', this)" class="mobile-nav-item active p-3 flex flex-col items-center gap-1 text-slate-400 w-full">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"></path></svg>
                <span class="text-[10px] font-bold uppercase tracking-wider">Jobs</span>
            </button>
            <button onclick="switchView('view-reputation', this)" class="mobile-nav-item p-3 flex flex-col items-center gap-1 text-slate-400 w-full border-l border-r border-slate-100">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"></path></svg>
                <span class="text-[10px] font-bold uppercase tracking-wider">Brand</span>
            </button>
            <button onclick="switchView('view-billing', this)" class="mobile-nav-item p-3 flex flex-col items-center gap-1 text-slate-400 w-full">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path></svg>
                <span class="text-[10px] font-bold uppercase tracking-wider">Plans</span>
            </button>
        </nav>
    </div>

    <div id="modal-upsell" class="modal-overlay">
        <div class="pro-card modal-content bg-white flex flex-col text-center p-8">
            <div class="w-16 h-16 bg-orange-50 text-[#FF5722] rounded-full flex items-center justify-center mx-auto mb-4">
                <svg class="w-8 h-8" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z" clip-rule="evenodd"></path></svg>
            </div>
            <h2 class="text-2xl font-extrabold text-slate-900 mb-2">Upgrade to Unlock</h2>
            <p class="text-sm text-slate-600 mb-6" id="upsell-text">This feature requires a premium plan.</p>
            <button class="btn-main py-4 mb-3" onclick="switchView('view-billing'); closeModal('modal-upsell')">View Subscription Plans</button>
            <button class="text-xs font-bold text-slate-400 uppercase tracking-widest hover:text-slate-900" onclick="closeModal('modal-upsell')">Cancel</button>
        </div>
    </div>

    <div id="modal-add-log" class="modal-overlay">
        <div class="pro-card modal-content bg-white p-6">
            <h2 class="text-xl font-extrabold mb-4">Snap Progress</h2>
            <button class="w-full border-2 border-dashed border-slate-300 bg-slate-50 rounded h-32 text-slate-500 mb-4">Tap to Open Camera</button>
            <button class="btn-main py-4" onclick="btnAction(this, 'Saved!')">Log to Timeline</button>
            <button class="btn-secondary py-4 mt-2" onclick="closeModal('modal-add-log')">Cancel</button>
        </div>
    </div>

    <div id="modal-eta" class="modal-overlay">
        <div class="pro-card modal-content bg-white p-6">
            <h2 class="text-xl font-extrabold mb-4">Send ETA</h2>
            <div class="grid grid-cols-2 gap-3 mb-4">
                <button class="btn-secondary py-4" onclick="btnAction(this, 'Sent!')">On my way</button>
                <button class="btn-secondary py-4" onclick="btnAction(this, 'Sent!')">Late (15m)</button>
            </div>
            <button class="btn-secondary w-full py-4 border-none text-slate-400" onclick="closeModal('modal-eta')">Close</button>
        </div>
    </div>

    <div id="modal-change-order" class="modal-overlay">
        <div class="pro-card modal-content bg-white p-6">
            <h2 class="text-xl font-extrabold mb-4">Change Order</h2>
            <input type="text" class="pro-input mb-3" placeholder="Description of work">
            <input type="number" class="pro-input mb-4" placeholder="$ Cost">
            <button class="btn-main py-4 w-full" onclick="btnAction(this, 'Sent to Client!')">Request Authorization</button>
            <button class="btn-secondary w-full py-4 mt-2" onclick="closeModal('modal-change-order')">Cancel</button>
        </div>
    </div>

    <div id="modal-request-funds" class="modal-overlay">
        <div class="pro-card modal-content bg-slate-900 text-white p-6">
            <h2 class="text-xl font-extrabold mb-4">Request Payout</h2>
            <div class="bg-slate-800 p-4 rounded border border-slate-700 mb-4 flex justify-between items-center">
                <span>Phase 1: Demo</span>
                <span class="font-bold text-xl">$1,850</span>
            </div>
            <button class="w-full bg-[#FF5722] text-white font-bold py-4 rounded hover:bg-[#E64A19]" onclick="btnAction(this, 'Request Sent!')">Push to Client</button>
            <button class="w-full text-slate-400 font-bold py-4 mt-2" onclick="closeModal('modal-request-funds')">Cancel</button>
        </div>
    </div>

    <div id="modal-quick-bid" class="modal-overlay">
        <div class="pro-card modal-content bg-white p-6">
            <h2 class="text-xl font-extrabold mb-4">Send Quick Bid</h2>
            <input type="tel" class="pro-input py-4 text-lg font-bold mb-4" placeholder="Client Mobile #">
            <button class="btn-main py-4 w-full" onclick="btnAction(this, 'Link Sent!')">Send via SMS</button>
            <button class="btn-secondary w-full py-4 mt-2" onclick="closeModal('modal-quick-bid')">Cancel</button>
        </div>
    </div>

    <div id="modal-new-project" class="modal-overlay">
        <div class="pro-card modal-content bg-white p-6">
            <h2 class="text-xl font-extrabold mb-4">New Project</h2>
            <input type="text" class="pro-input mb-3" placeholder="Project Name">
            <input type="number" class="pro-input mb-4" placeholder="Total Bid Amount">
            <button class="btn-main py-4 w-full" onclick="btnAction(this, 'Link Generated!')">Generate Square Link</button>
            <button class="btn-secondary w-full py-4 mt-2 border-none text-slate-400" onclick="closeModal('modal-new-project')">Close</button>
        </div>
    </div>

    <script>
        // CORE DEMO TIER LOGIC
        const tiers = ['Starter', 'Solo', 'Growth'];
        let currentTierIndex = 1; // Default to Solo

        function cycleTier() {
            currentTierIndex = (currentTierIndex + 1) % tiers.length;
            const newTier = tiers[currentTierIndex];
            setDemoTier(newTier);
        }

        function setDemoTier(tierName) {
            currentTierIndex = tiers.indexOf(tierName);
            document.body.setAttribute('data-tier', tierName);
            document.getElementById('desktop-tier-label').innerText = `${tierName} Plan`;
            document.getElementById('mobile-tier-label').innerHTML = `${tierName} <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"></path></svg>`;
            
            // Pop an alert just for the demo
            const toast = document.createElement('div');
            toast.className = 'fixed top-4 left-1/2 transform -translate-x-1/2 bg-black text-white px-4 py-2 rounded-full font-bold text-xs z-[2000] shadow-xl animate-[fadeIn_0.2s_ease-out]';
            toast.innerText = `Simulating ${tierName} Tier Constraints`;
            document.body.appendChild(toast);
            setTimeout(() => toast.remove(), 2000);
            
            // If on billing view, scroll to top
            if(document.getElementById('view-billing').classList.contains('active')) {
                window.scrollTo({ top: 0, behavior: 'smooth' });
            }
        }

        // VIEW LOGIC
        function switchView(viewId, clickedElement = null) {
            document.querySelectorAll('.view-pane').forEach(v => v.classList.remove('active'));
            document.getElementById(viewId).classList.add('active');
            
            if(clickedElement && clickedElement.classList.contains('nav-item')) {
                document.querySelectorAll('.nav-item').forEach(nav => {
                    nav.classList.remove('active', 'bg-slate-100', 'text-slate-900');
                    nav.classList.add('text-slate-600');
                });
                clickedElement.classList.remove('text-slate-600');
                clickedElement.classList.add('active', 'bg-slate-100', 'text-slate-900');
            }
            
            if(clickedElement && clickedElement.classList.contains('mobile-nav-item')) {
                document.querySelectorAll('.mobile-nav-item').forEach(nav => {
                    nav.classList.remove('active');
                    nav.classList.replace('text-[var(--pro-orange)]', 'text-slate-400');
                });
                clickedElement.classList.add('active');
            }
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // MODAL & UPSELL LOGIC
        function openModal(id) {
            document.getElementById(id).classList.add('active');
            document.body.style.overflow = 'hidden'; 
        }

        function closeModal(id) {
            document.getElementById(id).classList.remove('active');
            document.body.style.overflow = 'auto';
            setTimeout(() => {
                document.querySelectorAll('.btn-main, .btn-secondary').forEach(btn => {
                    if(btn.dataset.originalText) {
                        btn.innerHTML = btn.dataset.originalText;
                        btn.classList.remove('bg-emerald-600', 'text-white', 'border-emerald-600');
                    }
                });
            }, 300);
        }

        function openUpsell(featureName, requiredTier) {
            document.getElementById('upsell-text').innerText = `To access ${featureName}, please upgrade your account to the ${requiredTier} plan.`;
            openModal('modal-upsell');
        }

        function checkTierAction(requiredTier, modalId) {
            const current = document.body.getAttribute('data-tier');
            if (current === 'Starter' && requiredTier !== 'Starter') {
                openUpsell('this feature', requiredTier);
            } else {
                if(modalId === 'modal-new-project' && current !== 'Starter') {
                    // Solo/Growth get the full bid builder
                    switchView('view-bid-builder');
                } else {
                    openModal(modalId);
                }
            }
        }

        function btnAction(btnElement, successText) {
            btnElement.dataset.originalText = btnElement.innerHTML;
            btnElement.innerHTML = `‚úì ${successText}`;
            btnElement.classList.add('bg-emerald-600', 'text-white', 'border-emerald-600');
            setTimeout(() => {
                closeModal(btnElement.closest('.modal-overlay').id);
            }, 1000);
        }
    </script>
</body>
</html>
